# è¿è¡Œåœ¨ç»ˆç«¯çš„åº”ç”¨

`tui`ï¼Œå…¨ç§°ä¸º `Terminal UI`ï¼Œæ„ä¸ºåœ¨ç»ˆç«¯ä¸Šç»˜åˆ¶å›¾å½¢ï¼Œç»“åˆåº”ç”¨ç¨‹åºå³å¯å¾—åˆ°è¿è¡Œåœ¨ç»ˆç«¯çš„åº”ç”¨ç¨‹åºã€‚

## æµè¡Œ TUI æ¡†æ¶ä¸€è§ˆ

é™†ç»­å°è¯•è¿‡ä¸€äº› tui æ¡†æ¶ï¼Œè¿™é‡Œç®€å•ä»‹ç»å„æ¡†æ¶ä¼˜åŠ£ï¼Œä»¥åŠæˆ‘çš„ä½¿ç”¨ä½“éªŒã€‚

### blessed

<img class="preview" src="./assets/blessed.png">

è¯„åˆ†ï¼š`â˜…â˜…â˜…â˜†â˜†`

[blessed](https://github.com/chjj/blessed) æ˜¯ä¸€ä¸ªåŸºäº nodejs çš„ç»ˆç«¯ç•Œé¢åº“ï¼Œæä¾›äº†é«˜çº§çš„ç»ˆç«¯æ¥å£ï¼Œä½¿åœ¨ç»ˆç«¯ä¸Šå®ç°å¯äº¤äº’çš„ç•Œé¢ã€‚
åŸºäº nodejs ä½¿ä¹‹é¢å‘å‰ç«¯å‹å¥½ï¼Œæä¾›äº†ä¸°å¯Œçš„ç»„ä»¶ä»¥åŠå¤§é‡çš„ apiï¼Œè®©æ„å»ºåº”ç”¨å¾—å¿ƒåº”æ‰‹ã€‚

-   ä¼˜ç‚¹ï¼šåŠŸèƒ½æå…¶å¼ºå¤§ï¼Œä¸€ä¸ªåº“å°±ä¼¼ä¹å¯ä»¥å®Œæˆæ‰€æœ‰çš„äº‹æƒ…ã€‚åŸºäº nodejsï¼Œé¢å‘å‰ç«¯å‹å¥½ã€‚
-   ç¼ºç‚¹ï¼šä¼˜ç‚¹å³ç¼ºç‚¹ï¼ŒåŠŸèƒ½å¤ªå¤šé…ç½®å¤ªå¤šï¼Œä½¿ç”¨èµ·æ¥å¤ªå¤æ‚ã€‚åŸºäº nodejs ä¹Ÿæ„å‘³ç€éš¾ä»¥åŸç”Ÿè·¨å¹³å°ã€‚æœ€æœ€é‡è¦çš„ï¼Œè¿™ä¸ªåº“å·²ç»è¿‘ 10 å¹´æ²¡æ›´æ–°äº† ğŸ˜‚ğŸ˜‚

æ¥éƒ½æ¥äº†ï¼Œçœ‹çœ‹è¿™ä¸ªåŸºäº blessed çš„æ§åˆ¶å°æ¸¸æˆé›†åˆï¼š[togame](https://github.com/shalldie/togame)

### tview

<img class="preview" src="./assets/tview.png">

è¯„åˆ†ï¼š`â˜…â˜…â˜…â˜†â˜†`

[tview](https://github.com/rivo/tview) æ˜¯ä¸€æ¬¾åŸºäº golang çš„ç»ˆç«¯åº”ç”¨æ¡†æ¶ï¼Œæä¾›äº†ä¸€ç³»åˆ—å¸¸ç”¨åŸºç¡€ç»„ä»¶ï¼ŒåŒ…å«äº† è¡¨å•ã€æ–‡æœ¬åŸŸã€è¡¨æ ¼ã€å¼¹æ€§å¸ƒå±€ã€Grid å¸ƒå±€ã€æ¨¡æ€æ¡†ç­‰ã€‚
ä¹Ÿæ‹¥æœ‰ä¸€å®šçš„ç¤¾åŒºç”Ÿæ€ï¼Œå¯ä»¥æ‰¾åˆ°å¥½ç”¨çš„ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œä½¿ç”¨åŸºæ•°ä¹Ÿç›¸å½“çš„é«˜ã€‚

-   ä¼˜ç‚¹ï¼šç±»é¢å‘å¯¹è±¡ï¼Œç»„ä»¶åŒ–ç¨‹åº¦ç›¸å½“é«˜ï¼Œå¯¹äºç®¡ç†ç±»åº”ç”¨å¯ä»¥å¿«é€Ÿé›†æˆï¼Œä¸Šæ‰‹æˆæœ¬è¾ƒä½ã€‚
-   ç¼ºç‚¹ï¼šæ‰©å±•ç°æœ‰ç»„ä»¶ã€æ–°å¢ç»„ä»¶ï¼Œæˆæœ¬è¾ƒé«˜ï¼Œéœ€è¦å¯¹äº tui åº”ç”¨å’Œç°æœ‰é¡¹ç›®æœ‰ä¸€å®šçš„äº†è§£ã€‚UI åªé€‚åˆç®¡ç†ç±»çš„åº”ç”¨ï¼Œæ¯”è¾ƒä¿å®ˆ/è€æ—§ã€‚

å†™è¿‡ä¸€ä¸ªåŸºäº tview çš„è®°äº‹æœ¬ç¨‹åºï¼šhttps://github.com/shalldie/tnote/tree/ver.tview

### bubbletea

<img class="preview" src="./assets/tnote.png">

è¯„åˆ†ï¼š`â˜…â˜…â˜…â˜…â˜†`

bubbletea åŒæ ·åŸºäº golangï¼Œéå¸¸é€‚åˆæ„å»ºå¤æ‚äº¤äº’çš„ç»ˆç«¯åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶è¿˜èƒ½è®©å‘½ä»¤è¡Œç¨‹åºå˜å¾—å¤šå½©å’Œç‚«é…·ã€‚
å®ƒæ˜¯ [charmbracelet](https://github.com/charmbracelet) å®¶æ—çš„ä¸€éƒ¨åˆ†ï¼Œä¸‹é¢åˆ†äº«ä¸‹æˆ‘å¯¹äºè¿™äº›åº“çš„ç†è§£å’Œä½¿ç”¨ã€‚

-   ä¼˜ç‚¹ï¼šé«˜åº¦çµæ´»ï¼Œç»„ä»¶åŒ–ç¨‹åº¦é«˜ï¼Œç”Ÿæ€ä¸°å¯Œï¼Œå¥½çœ‹ã€‚
-   ç¼ºç‚¹ï¼šä¸Šæ‰‹éœ€è¦ä¸€å®šçš„æˆæœ¬ã€‚

## bubbletea

bubbletea æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ TUI æ¡†æ¶ï¼Œç®€å•ã€å°å·§ï¼Œå†…ç½®ç®€å•çš„äº‹ä»¶å¤„ç†æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–éƒ¨äº‹ä»¶åšå‡ºå“åº”ï¼Œæ¯”å¦‚é”®ç›˜æŒ‰é”®ï¼Œé¼ æ ‡ç‚¹å‡»ç­‰ã€‚

### å‡†å¤‡&ç®€ä»‹

åœ¨å¼€å§‹å‰å…ˆå¼•å…¥è¯¥åº“ï¼Œä¸€èˆ¬ç”¨ `tea` åšåˆ«åï¼Œæ¯•ç«Ÿ `bubbletea` æœ‰ç‚¹é•¿ï¼š

```go
package main

import (
    "fmt"
    "os"

    tea "github.com/charmbracelet/bubbletea"
)
```

bubbletea åº”ç”¨/ç»„ä»¶ï¼Œç”±ä¸€ä¸ªæè¿°åº”ç”¨ç¨‹åºçŠ¶æ€çš„ `model`ï¼Œå’Œ `model` ä¸Š 3 ä¸ªç®€å•æ–¹æ³•ç»„æˆï¼š

-   `Init`, åœ¨åº”ç”¨/ç»„ä»¶åˆ›å»ºçš„æ—¶å€™ä¼šè°ƒç”¨ï¼Œåšä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œè¿”å›ä¸€ä¸ª `cmd` æ¥å‘ŠçŸ¥æ¡†æ¶è¦æ‰§è¡Œä»€ä¹ˆå‘½ä»¤ã€‚
-   `Update`, ç”¨äºå“åº”å¤–éƒ¨ä¼ å…¥çš„äº‹ä»¶ï¼Œå¹¶æ®æ­¤æ¥æ›´æ–° modelï¼Œè¿›è€Œè§¦å‘ ui æ›´æ–°.
-   `View`, æ ¹æ® model æ¥ç”Ÿæˆéœ€è¦åœ¨æ§åˆ¶å°æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ï¼Œæ²¡é”™ï¼Œå®ƒçš„è§†å›¾å…¨éƒ½æ˜¯å­—ç¬¦ä¸²æ¯”è¾ƒåº•å±‚ã€‚

### å…³äº model

`model` ä¸€èˆ¬ç”¨æ¥å­˜å‚¨åº”ç”¨çš„çŠ¶æ€ï¼Œå¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æƒ…å†µä¸€èˆ¬ä¼šç”¨ `struct` æ¥åšï¼Œæ›´é¢å‘å¯¹è±¡ã€‚

```go
type model struct {
    choices  []string           // items on the to-do list
    cursor   int                // which to-do list item our cursor is pointing at
    selected map[int]struct{}   // which to-do items are selected
}
```

### Init

åœ¨ golang ä¸­ï¼Œstruct çš„åˆå§‹åŒ–ä¸€èˆ¬éƒ½ä¼šç”¨å·¥å‚ï¼Œå³ä¸€ä¸ªå‡½æ•°å»è¿”å› struct çš„å®ä¾‹ã€‚

```go
func initialModel() model {
	return model{
		// Our to-do list is a grocery list
		choices:  []string{"Buy carrots", "Buy celery", "Buy kohlrabi"},

		// A map which indicates which choices are selected. We're using
		// the  map like a mathematical set. The keys refer to the indexes
		// of the `choices` slice, above.
		selected: make(map[int]struct{}),
	}
}
```

éœ€è¦ç»™ model å®šä¹‰ `Init` æ–¹æ³•ï¼Œå®ƒè¿”å› `Cmd` æ¥å‘ŠçŸ¥ç¨‹åºéœ€è¦åšä»€ä¹ˆå·¥ä½œã€‚å¦‚æœä»€ä¹ˆéƒ½ä¸éœ€è¦åˆ»æ„è¿”å› `nil`ï¼Œè¡¨ç¤º `no command`ã€‚

```go
func (m model) Init() tea.Cmd {
    // Just return `nil`, which means "no I/O right now, please."
    return nil
}
```

### Update

`when things happen`ï¼Œå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œ`Update` æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œå®ƒä¼šåˆ¤æ–­å‘ç”Ÿäº†å•¥ï¼Œå¹¶è¿”å›æ–°çš„æ¨¡å‹æ¥ä½œä¸ºå“åº”ï¼Œä¹Ÿå¯ä»¥è¿”å› Cmd æ¥ä½¿æ›´å¤šçš„äº‹ä»¶å‘ç”Ÿã€‚

æ¯”å¦‚ç”¨æˆ·æŒ‰ä¸‹äº†æŸä¸ªæŒ‰é”®ï¼Œç‚¹å‡»äº†æŸéƒ¨åˆ†ï¼Œé¼ æ ‡æ»šè½®ï¼Œæˆ–è€…æ˜¯è‡ªå®šä¹‰çš„äº‹ä»¶ã€‚

`äº‹ä»¶è§¦å‘` ä»¥ `Msg` çš„å½¢å¼å‡ºç°ï¼Œå®ƒå¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚Msg æ˜¯å‘ç”Ÿçš„æŸäº› I/O çš„ç»“æœï¼Œä¾‹å¦‚æŒ‰é”®ï¼Œæ¥è‡ªæœåŠ¡ç«¯çš„å“åº”ç­‰ã€‚
æˆ‘çš„ç»éªŒï¼Œç”¨ç±»å‹æ¥è¡¨ç¤ºäº‹ä»¶ç±»å‹ï¼Œè¯¥ç±»å‹çš„å€¼ä½œä¸ºäº‹ä»¶è´Ÿè·çš„è½½ä½“ã€‚ç±»ä¼¼äº `Payload`ã€‚

```go
func (m model) Update(msg tea.Msg) (tea.Model, tea.Cmd) {
    switch msg := msg.(type) {

    // Is it a key press?
    case tea.KeyMsg:

        // Cool, what was the actual key pressed?
        switch msg.String() {

        // These keys should exit the program.
        case "ctrl+c", "q":
            return m, tea.Quit

        // The "up" and "k" keys move the cursor up
        case "up", "k":
            if m.cursor > 0 {
                m.cursor--
            }

        // The "down" and "j" keys move the cursor down
        case "down", "j":
            if m.cursor < len(m.choices)-1 {
                m.cursor++
            }

        // The "enter" key and the spacebar (a literal space) toggle
        // the selected state for the item that the cursor is pointing at.
        case "enter", " ":
            _, ok := m.selected[m.cursor]
            if ok {
                delete(m.selected, m.cursor)
            } else {
                m.selected[m.cursor] = struct{}{}
            }
        }
    }

    // Return the updated model to the Bubble Tea runtime for processing.
    // Note that we're not returning a command.
    return m, nil
}
```

è¿™é‡Œçš„ä¾‹å­ï¼Œå½“æŒ‰ä¸‹äº† `ctrl+c` æˆ–è€… `q` çš„æ—¶å€™ï¼Œä¼šè¿”å› `tea.Quit` å‘½ä»¤å’Œ modelã€‚è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šå‘½ä»¤ï¼Œä¼šå‘ŠçŸ¥ Bubble Tea å»é€€å‡ºåº”ç”¨ç¨‹åºã€‚

### View

æ‰€æœ‰çš„æ–¹æ³•ä¸­ï¼Œ`View` æ˜¯æœ€ç®€å•çš„ã€‚å°±æ˜¯æ ¹æ®å½“å‰ model çš„çŠ¶æ€ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å­—ç¬¦ä¸²å°±æ˜¯æœ€ç»ˆçš„ UIã€‚

å› ä¸ºè§†å›¾æè¿°äº†åº”ç”¨ç¨‹åºçš„æ•´ä¸ª UIï¼Œæ‰€ä»¥ä¸å¿…æ‹…å¿ƒé‡æ–°ç»˜åˆ¶é€»è¾‘ä¹‹ç±»çš„äº‹æƒ…ã€‚Bubble Tea ä¼šå¸®ä½ æå®šçš„ã€‚

èº«ä¸ºå‰ç«¯å¯¹çŠ¶æ€ç®¡ç†ä¹Ÿç»å¸¸ç”¨åˆ°ï¼Œæˆ‘ä¹Ÿæœ‰ä¸€äº›ä¸æˆç†Ÿçš„ç»éªŒã€‚åº”ç”¨çš„å„ä¸ªéƒ¨åˆ†çŠ¶æ€å¦‚æœåˆ†æ•£åˆ°å„ä¸ªç»„ä»¶ä¸­å»ï¼Œå¾ˆéš¾å»äº’ç›¸è®¿é—®åˆ°ã€‚å¦‚æœé›†ä¸­ç®¡ç†çŠ¶æ€ï¼Œé›†ä¸­å¤„ç†ä¸šåŠ¡ï¼Œå°±æŠŠ `ä¸šåŠ¡å±‚` å’Œ `UIå±‚` åˆ†ç¦»äº†ï¼Œèƒ½æ›´å¥½çš„ç»„ç»‡ä¸šåŠ¡é€»è¾‘ï¼Œç»„ä»¶å°±åªè´Ÿè´£æ¸²æŸ“å°±è¡Œã€‚åšæ³•æ˜¯å¼„ä¸€ä¸ªå•ä¾‹å»å­˜å‚¨æ‰€æœ‰çš„çŠ¶æ€ï¼Œè¿˜æ˜¯ç”¨ `Update` å»é€šçŸ¥æ›´æ–°ï¼Œä¸è¿‡ `View` ä¸­ä¼šå¼•ç”¨è¿™ä¸ªå•ä¾‹ä¸­çš„å€¼å»æ›´æ–°ã€‚

```go
func (m model) View() string {
    // The header
    s := "What should we buy at the market?\n\n"

    // Iterate over our choices
    for i, choice := range m.choices {

        // Is the cursor pointing at this choice?
        cursor := " " // no cursor
        if m.cursor == i {
            cursor = ">" // cursor!
        }

        // Is this choice selected?
        checked := " " // not selected
        if _, ok := m.selected[i]; ok {
            checked = "x" // selected!
        }

        // Render the row
        s += fmt.Sprintf("%s [%s] %s\n", cursor, checked, choice)
    }

    // The footer
    s += "\nPress q to quit.\n"

    // Send the UI for rendering
    return s
}
```

### å¯åŠ¨åº”ç”¨

æŠŠå…¥å£çš„ model ä¼ é€’ç»™ `tea.NewProgram`ï¼Œå°±èƒ½å¼€å¯ä¸€ä¸ªæ–°çš„åº”ç”¨ã€‚è¯¥ model é€šå¸¸æ˜¯ä½œä¸ºä¸€ä¸ª layout æ¥å¸ƒå±€ï¼ŒåŒæ ·çš„å„ä¸ªç»„ä»¶ä¹Ÿèƒ½ç»§ç»­åµŒå¥—å…¶å®ƒç»„ä»¶ï¼Œæœ€ç»ˆå½¢æˆä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œå…¥å£çš„ modelï¼Œå³ä¸ºæ ¹ç»“ç‚¹ã€‚

```go
func main() {
    p := tea.NewProgram(initialModel())
    if _, err := p.Run(); err != nil {
        fmt.Printf("Alas, there's been an error: %v", err)
        os.Exit(1)
    }
}
```

## ç›¸å…³ç”Ÿæ€

è¿™æ˜¯æˆ‘å€¾å¿ƒäº bubbletea çš„ä¸€ä¸ªé‡å¤§åŸå› ï¼Œå®ƒæ‹¥æœ‰å¾ˆå¤šç›¸å…³è”çš„åº“ï¼ˆè‡ªå·±çš„ï¼Œç¬¬ä¸‰æ–¹çš„ï¼‰ï¼ŒIssues å’Œ Discussions éƒ½æŒºæ´»è·ƒï¼Œåé¦ˆåŠæ—¶ã€‚

### Bubbles

[Bubbles](https://github.com/charmbracelet/bubbles): å¸¸ç”¨çš„ Bubble Tea ç»„ä»¶ï¼Œæ¯”å¦‚ text inputsã€viewportsã€spinners ç­‰ç­‰ã€‚

### Lip Gloss

[Lip Gloss](https://github.com/charmbracelet/lipgloss): TUI çš„æ ·å¼ã€æ ¼å¼ã€å¸ƒå±€ç›¸å…³çš„å·¥å…·åº“ï¼Œéå¸¸å¼ºå¤§ï¼ï¼ ä¸”å¥½çœ‹ï¼š

<img class="preview" src="./assets/lipgloss.png">

### Harmonica

[Harmonica](https://github.com/charmbracelet/harmonica): ä¸€ä¸ªåŠ¨ç”»åº“ï¼Œèƒ½ç»™ tui æ·»åŠ æµç¨‹ã€è‡ªç„¶çš„è¿åŠ¨æ•ˆæœã€‚

### BubbleZone

[BubbleZone](https://github.com/lrstanley/bubblezone): å¯ä»¥ç»™ Bubble Tea ç»„ä»¶ä¾¿æ·çš„æ·»åŠ é¼ æ ‡å¤„ç†äº‹ä»¶ã€‚

### Glamour

[Glamour](https://github.com/charmbracelet/glamour): Markdown æ¸²æŸ“å™¨ï¼Œå¯ä»¥åœ¨ CLI åº”ç”¨ä¸Šæ¸²æŸ“å‡ºå¥½çœ‹çš„ markdown å†…å®¹ã€‚

## TNote

åŸºäº Bubble Teaï¼Œæˆ‘å†™äº†ä¸ªè¿è¡Œåœ¨ Terminal çš„äº‘ç¬”è®°æœ¬åº”ç”¨ç¨‹åºï¼Œå¯ä»¥åœ¨ä¸åŒè®¾å¤‡å¿«é€Ÿè®¿é—®ã€åŒæ­¥å†…å®¹ï¼Œè®°å½•è‡ªå·±çš„æƒ³æ³•ã€‚

å¦‚æœä½ èƒ½çœ‹åˆ°è¿™é‡Œï¼Œæ¬¢è¿ç»™ [tnote](https://github.com/shalldie/tnote) æ¥ä¸ª star ~ :D

<img class="preview" src="./assets/tnote.png">

## å‚è€ƒ

https://charm.sh/

https://github.com/charmbracelet/bubbletea
